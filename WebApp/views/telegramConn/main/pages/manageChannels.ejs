<script src="/script/telegramConn/js/manageChannels.js"></script>
<div id="overlay">
    <div class="text text-center">
      <div class="spinner-border" role="status">
        <span class="sr-only">Loading...</span>
      </div>
    </div>
</div>
<div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800">Manage Channels</h1>
</div>

<div ng-app="mgmChnnlApp" ng-controller="mgmChnnlCtrl">
  <div class="table-responsive">
    <table class="table table-bordered dataTable" id="dataTable" width="100%" cellspacing="0" role="grid" aria-describedby="dataTable_info" >
        <thead>
          <tr>
            <th>Channel Name</th>
            <th></th>
          </tr>
        </thead>
        <tfoot>
          <tr>
            <th>Channel Name</th>
            <th></th>
          </tr>
        </tfoot>
        <tbody>
          <tr ng-repeat="channel in data.channels">
            <td>{{channel.value}}</td>
            <td>
                <a href="#" class="btn btn-warning btn-icon-split btn-sm" ng-click="editing(channel.id)" data-toggle="modal" data-target="#editChnnlModal">
                    <span class="icon text-white-50">
                        <i class="fas fa-pen"></i>
                    </span>
                    <span class="text">Edit</span>
                </a>
                <a href="#" class="btn btn-danger btn-icon-split btn-sm"  ng-click="deleting(channel.id)" data-toggle="modal" data-target="#deleteChnnlModal">
                    <span class="icon text-white-50">
                    <i class="fas fa-trash"></i>
                    </span>
                    <span class="text">Delete</span>
                </a>
            </td>
          </tr>
        </tbody>
    </table>
  </div>

  <!-- Edit Channel Info Modal -->
  <div class="modal fade bd-example-modal-lg" id="editChnnlModal" tabindex="-2" role="dialog" aria-labelledby="editChnnlModal" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="editChnnlModalTitle">Edit Channel Name</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <div class="row">
                        <div class="form-group col-md-6" >
                            <label for="value">Channel Name</label>
                            <input class="form-control" name="value" ng-model="data.editChannel.value">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="update()">Update</button>
            </div>
        </div>
    </div>
  </div>

  <!-- Delete confirm modal -->
  <div class="modal fade bd-example-modal-lg" id="deleteChnnlModal" tabindex="-2" role="dialog" aria-labelledby="deleteChnnlModal" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="deleteChnnlModalTitle">Delete Channel</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            </div>
            <div class="modal-body">
                Confirm delete?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                <button type="button" class="btn btn-primary" ng-click="delete()" data-dismiss="modal">Yes</button>
            </div>
        </div>
    </div>
</div>